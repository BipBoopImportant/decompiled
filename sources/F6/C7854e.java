package f6;

import T5.j;
import T5.r;
import X5.C6721f;
import YH.X;
import c6.C7095a;
import c6.C7098d;
import f6.C7853d;
import java.util.LinkedHashMap;
import java.util.Map;
import k6.C8441h;
import k6.C8442i;
import k6.C8450q;
import k6.C8452s;
import k6.C8454u;
import kotlin.Metadata;
import kotlin.jvm.internal.DefaultConstructorMarker;
import l6.f;
import l6.h;
import r6.E;
import r6.s;

@Metadata(d1 = {"\u0000n\n\u0002\u0018\u0002\n\u0002\u0010\u0000\n\u0002\u0018\u0002\n\u0000\n\u0002\u0018\u0002\n\u0000\n\u0002\u0018\u0002\n\u0002\b\u0003\n\u0002\u0018\u0002\n\u0000\n\u0002\u0018\u0002\n\u0000\n\u0002\u0018\u0002\n\u0000\n\u0002\u0018\u0002\n\u0000\n\u0002\u0018\u0002\n\u0000\n\u0002\u0010\u000b\n\u0002\b\u0003\n\u0002\u0018\u0002\n\u0000\n\u0002\u0018\u0002\n\u0002\b\u0006\n\u0002\u0018\u0002\n\u0002\b\u0003\n\u0002\u0018\u0002\n\u0000\n\u0002\u0018\u0002\n\u0002\b\b\n\u0002\u0010\u000e\n\u0002\b\u0003\b\u0000\u0018\u0000  2\u00020\u0001:\u0001\u001eB!\u0012\u0006\u0010\u0003\u001a\u00020\u0002\u0012\u0006\u0010\u0005\u001a\u00020\u0004\u0012\b\u0010\u0007\u001a\u0004\u0018\u00010\u0006¢\u0006\u0004\b\b\u0010\tJ7\u0010\u0015\u001a\u00020\u00142\u0006\u0010\u000b\u001a\u00020\n2\u0006\u0010\r\u001a\u00020\f2\u0006\u0010\u000f\u001a\u00020\u000e2\u0006\u0010\u0011\u001a\u00020\u00102\u0006\u0010\u0013\u001a\u00020\u0012H\u0002¢\u0006\u0004\b\u0015\u0010\u0016J/\u0010\u001c\u001a\u0004\u0018\u00010\f2\u0006\u0010\u000b\u001a\u00020\n2\u0006\u0010\u0017\u001a\u00020\u00012\u0006\u0010\u0019\u001a\u00020\u00182\u0006\u0010\u001b\u001a\u00020\u001a¢\u0006\u0004\b\u001c\u0010\u001dJ/\u0010\u001e\u001a\u0004\u0018\u00010\u000e2\u0006\u0010\u000b\u001a\u00020\n2\u0006\u0010\r\u001a\u00020\f2\u0006\u0010\u0011\u001a\u00020\u00102\u0006\u0010\u0013\u001a\u00020\u0012¢\u0006\u0004\b\u001e\u0010\u001fJ7\u0010 \u001a\u00020\u00142\u0006\u0010\u000b\u001a\u00020\n2\u0006\u0010\r\u001a\u00020\f2\u0006\u0010\u000f\u001a\u00020\u000e2\u0006\u0010\u0011\u001a\u00020\u00102\u0006\u0010\u0013\u001a\u00020\u0012H\u0000¢\u0006\u0004\b \u0010\u0016J'\u0010#\u001a\u00020\u00142\b\u0010\r\u001a\u0004\u0018\u00010\f2\u0006\u0010\u000b\u001a\u00020\n2\u0006\u0010\"\u001a\u00020!¢\u0006\u0004\b#\u0010$J-\u0010(\u001a\u00020'2\u0006\u0010&\u001a\u00020%2\u0006\u0010\u000b\u001a\u00020\n2\u0006\u0010\r\u001a\u00020\f2\u0006\u0010\u000f\u001a\u00020\u000e¢\u0006\u0004\b(\u0010)R\u0014\u0010\u0003\u001a\u00020\u00028\u0002X\u0004¢\u0006\u0006\n\u0004\b\u001e\u0010*R\u0014\u0010\u0005\u001a\u00020\u00048\u0002X\u0004¢\u0006\u0006\n\u0004\b+\u0010,R\u0018\u0010/\u001a\u00020\u0014*\u00020\u000e8BX\u0004¢\u0006\u0006\u001a\u0004\b-\u0010.R\u001a\u00102\u001a\u0004\u0018\u000100*\u00020\u000e8BX\u0004¢\u0006\u0006\u001a\u0004\b+\u00101¨\u00063"}, d2 = {"Lf6/e;", "", "LT5/r;", "imageLoader", "Lk6/s;", "requestService", "Lr6/s;", "logger", "<init>", "(LT5/r;Lk6/s;Lr6/s;)V", "Lk6/h;", "request", "Lf6/d$b;", "cacheKey", "Lf6/d$c;", "cacheValue", "Ll6/h;", "size", "Ll6/f;", "scale", "", "d", "(Lk6/h;Lf6/d$b;Lf6/d$c;Ll6/h;Ll6/f;)Z", "mappedData", "Lk6/q;", "options", "LT5/j;", "eventListener", "f", "(Lk6/h;Ljava/lang/Object;Lk6/q;LT5/j;)Lf6/d$b;", "a", "(Lk6/h;Lf6/d$b;Ll6/h;Ll6/f;)Lf6/d$c;", "c", "Lc6/a$b;", "result", "h", "(Lf6/d$b;Lk6/h;Lc6/a$b;)Z", "Lc6/d$a;", "chain", "Lk6/u;", "g", "(Lc6/d$a;Lk6/h;Lf6/d$b;Lf6/d$c;)Lk6/u;", "LT5/r;", "b", "Lk6/s;", "e", "(Lf6/d$c;)Z", "isSampled", "", "(Lf6/d$c;)Ljava/lang/String;", "diskCacheKey", "coil-core_release"}, k = 1, mv = {2, 1, 0}, xi = 48)
/* renamed from: f6.e  reason: case insensitive filesystem */
public final class C7854e {

    /* renamed from: c  reason: collision with root package name */
    public static final a f51183c = new a((DefaultConstructorMarker) null);

    /* renamed from: a  reason: collision with root package name */
    private final r f51184a;

    /* renamed from: b  reason: collision with root package name */
    private final C8452s f51185b;

    @Metadata(d1 = {"\u0000\u0014\n\u0002\u0018\u0002\n\u0002\u0010\u0000\n\u0002\b\u0002\n\u0002\u0010\u000e\n\u0002\b\u0006\b\u0003\u0018\u00002\u00020\u0001B\t\b\u0002¢\u0006\u0004\b\u0002\u0010\u0003R\u0014\u0010\u0005\u001a\u00020\u00048\u0002XT¢\u0006\u0006\n\u0004\b\u0005\u0010\u0006R\u0014\u0010\u0007\u001a\u00020\u00048\u0000XT¢\u0006\u0006\n\u0004\b\u0007\u0010\u0006R\u0014\u0010\b\u001a\u00020\u00048\u0000XT¢\u0006\u0006\n\u0004\b\b\u0010\u0006R\u0014\u0010\t\u001a\u00020\u00048\u0000XT¢\u0006\u0006\n\u0004\b\t\u0010\u0006¨\u0006\n"}, d2 = {"Lf6/e$a;", "", "<init>", "()V", "", "TAG", "Ljava/lang/String;", "EXTRA_SIZE", "EXTRA_IS_SAMPLED", "EXTRA_DISK_CACHE_KEY", "coil-core_release"}, k = 1, mv = {2, 1, 0}, xi = 48)
    /* renamed from: f6.e$a */
    public static final class a {
        public /* synthetic */ a(DefaultConstructorMarker defaultConstructorMarker) {
            this();
        }

        private a() {
        }
    }

    @Metadata(k = 3, mv = {2, 1, 0}, xi = 48)
    /* renamed from: f6.e$b */
    public /* synthetic */ class b {

        /* renamed from: a  reason: collision with root package name */
        public static final /* synthetic */ int[] f51186a;

        /* renamed from: b  reason: collision with root package name */
        public static final /* synthetic */ int[] f51187b;

        /* JADX WARNING: Failed to process nested try/catch */
        /* JADX WARNING: Missing exception handler attribute for start block: B:11:0x002a */
        static {
            /*
                l6.f[] r0 = l6.f.values()
                int r0 = r0.length
                int[] r0 = new int[r0]
                r1 = 1
                l6.f r2 = l6.f.FILL     // Catch:{ NoSuchFieldError -> 0x0010 }
                int r2 = r2.ordinal()     // Catch:{ NoSuchFieldError -> 0x0010 }
                r0[r2] = r1     // Catch:{ NoSuchFieldError -> 0x0010 }
            L_0x0010:
                r2 = 2
                l6.f r3 = l6.f.FIT     // Catch:{ NoSuchFieldError -> 0x0019 }
                int r3 = r3.ordinal()     // Catch:{ NoSuchFieldError -> 0x0019 }
                r0[r3] = r2     // Catch:{ NoSuchFieldError -> 0x0019 }
            L_0x0019:
                f51186a = r0
                l6.c[] r0 = l6.C8531c.values()
                int r0 = r0.length
                int[] r0 = new int[r0]
                l6.c r3 = l6.C8531c.EXACT     // Catch:{ NoSuchFieldError -> 0x002a }
                int r3 = r3.ordinal()     // Catch:{ NoSuchFieldError -> 0x002a }
                r0[r3] = r1     // Catch:{ NoSuchFieldError -> 0x002a }
            L_0x002a:
                l6.c r1 = l6.C8531c.INEXACT     // Catch:{ NoSuchFieldError -> 0x0032 }
                int r1 = r1.ordinal()     // Catch:{ NoSuchFieldError -> 0x0032 }
                r0[r1] = r2     // Catch:{ NoSuchFieldError -> 0x0032 }
            L_0x0032:
                f51187b = r0
                return
            */
            throw new UnsupportedOperationException("Method not decompiled: f6.C7854e.b.<clinit>():void");
        }
    }

    public C7854e(r rVar, C8452s sVar, s sVar2) {
        this.f51184a = rVar;
        this.f51185b = sVar;
    }

    private final String b(C7853d.c cVar) {
        Object obj = cVar.a().get("coil#disk_cache_key");
        if (obj instanceof String) {
            return (String) obj;
        }
        return null;
    }

    /* JADX WARNING: Removed duplicated region for block: B:53:0x00e3 A[RETURN] */
    /* JADX WARNING: Removed duplicated region for block: B:54:0x00e4  */
    /* Code decompiled incorrectly, please refer to instructions dump. */
    private final boolean d(k6.C8441h r16, f6.C7853d.b r17, f6.C7853d.c r18, l6.h r19, l6.f r20) {
        /*
            r15 = this;
            java.util.Map r0 = r17.a()
            java.lang.String r1 = "coil#size"
            java.lang.Object r0 = r0.get(r1)
            java.lang.String r0 = (java.lang.String) r0
            r1 = 0
            r2 = 1
            if (r0 == 0) goto L_0x001c
            java.lang.String r3 = r19.toString()
            boolean r0 = kotlin.jvm.internal.C17542s.e(r0, r3)
            if (r0 == 0) goto L_0x001b
            return r2
        L_0x001b:
            return r1
        L_0x001c:
            r0 = r15
            r3 = r18
            boolean r4 = r15.e(r3)
            if (r4 != 0) goto L_0x0034
            boolean r4 = l6.i.b(r19)
            if (r4 != 0) goto L_0x0033
            l6.c r4 = r16.v()
            l6.c r5 = l6.C8531c.INEXACT
            if (r4 != r5) goto L_0x0034
        L_0x0033:
            return r2
        L_0x0034:
            T5.n r4 = r18.b()
            int r4 = r4.getWidth()
            T5.n r5 = r18.b()
            int r5 = r5.getHeight()
            T5.n r3 = r18.b()
            boolean r3 = r3 instanceof T5.C6697a
            if (r3 == 0) goto L_0x0051
            l6.h r3 = k6.C8442i.d(r16)
            goto L_0x0053
        L_0x0051:
            l6.h r3 = l6.h.f54771d
        L_0x0053:
            l6.a r6 = r19.b()
            boolean r7 = r6 instanceof l6.C8529a.C0868a
            r8 = 2147483647(0x7fffffff, float:NaN)
            if (r7 == 0) goto L_0x0065
            l6.a$a r6 = (l6.C8529a.C0868a) r6
            int r6 = r6.f()
            goto L_0x0066
        L_0x0065:
            r6 = r8
        L_0x0066:
            l6.a r7 = r3.b()
            boolean r9 = r7 instanceof l6.C8529a.C0868a
            if (r9 == 0) goto L_0x0075
            l6.a$a r7 = (l6.C8529a.C0868a) r7
            int r7 = r7.f()
            goto L_0x0076
        L_0x0075:
            r7 = r8
        L_0x0076:
            int r6 = java.lang.Math.min(r6, r7)
            l6.a r7 = r19.a()
            boolean r9 = r7 instanceof l6.C8529a.C0868a
            if (r9 == 0) goto L_0x0089
            l6.a$a r7 = (l6.C8529a.C0868a) r7
            int r7 = r7.f()
            goto L_0x008a
        L_0x0089:
            r7 = r8
        L_0x008a:
            l6.a r3 = r3.a()
            boolean r9 = r3 instanceof l6.C8529a.C0868a
            if (r9 == 0) goto L_0x0099
            l6.a$a r3 = (l6.C8529a.C0868a) r3
            int r3 = r3.f()
            goto L_0x009a
        L_0x0099:
            r3 = r8
        L_0x009a:
            int r3 = java.lang.Math.min(r7, r3)
            double r9 = (double) r6
            double r11 = (double) r4
            double r9 = r9 / r11
            double r11 = (double) r3
            double r13 = (double) r5
            double r11 = r11 / r13
            if (r6 == r8) goto L_0x00ab
            if (r3 == r8) goto L_0x00ab
            r7 = r20
            goto L_0x00ad
        L_0x00ab:
            l6.f r7 = l6.f.FIT
        L_0x00ad:
            int[] r8 = f6.C7854e.b.f51186a
            int r7 = r7.ordinal()
            r7 = r8[r7]
            r8 = 2
            if (r7 == r2) goto L_0x00d1
            if (r7 != r8) goto L_0x00cb
            int r7 = (r9 > r11 ? 1 : (r9 == r11 ? 0 : -1))
            if (r7 >= 0) goto L_0x00c4
            int r6 = r6 - r4
            int r3 = java.lang.Math.abs(r6)
            goto L_0x00e1
        L_0x00c4:
            int r3 = r3 - r5
            int r3 = java.lang.Math.abs(r3)
        L_0x00c9:
            r9 = r11
            goto L_0x00e1
        L_0x00cb:
            XH.t r1 = new XH.t
            r1.<init>()
            throw r1
        L_0x00d1:
            int r7 = (r9 > r11 ? 1 : (r9 == r11 ? 0 : -1))
            if (r7 <= 0) goto L_0x00db
            int r6 = r6 - r4
            int r3 = java.lang.Math.abs(r6)
            goto L_0x00e1
        L_0x00db:
            int r3 = r3 - r5
            int r3 = java.lang.Math.abs(r3)
            goto L_0x00c9
        L_0x00e1:
            if (r3 > r2) goto L_0x00e4
            return r2
        L_0x00e4:
            l6.c r3 = r16.v()
            int[] r4 = f6.C7854e.b.f51187b
            int r3 = r3.ordinal()
            r3 = r4[r3]
            r4 = 4607182418800017408(0x3ff0000000000000, double:1.0)
            if (r3 == r2) goto L_0x0102
            if (r3 != r8) goto L_0x00fc
            int r3 = (r9 > r4 ? 1 : (r9 == r4 ? 0 : -1))
            if (r3 > 0) goto L_0x00fb
            return r2
        L_0x00fb:
            return r1
        L_0x00fc:
            XH.t r1 = new XH.t
            r1.<init>()
            throw r1
        L_0x0102:
            int r3 = (r9 > r4 ? 1 : (r9 == r4 ? 0 : -1))
            if (r3 != 0) goto L_0x0107
            return r2
        L_0x0107:
            return r1
        */
        throw new UnsupportedOperationException("Method not decompiled: f6.C7854e.d(k6.h, f6.d$b, f6.d$c, l6.h, l6.f):boolean");
    }

    private final boolean e(C7853d.c cVar) {
        Object obj = cVar.a().get("coil#is_sampled");
        Boolean bool = obj instanceof Boolean ? (Boolean) obj : null;
        if (bool != null) {
            return bool.booleanValue();
        }
        return false;
    }

    public final C7853d.c a(C8441h hVar, C7853d.b bVar, h hVar2, f fVar) {
        if (!hVar.s().b()) {
            return null;
        }
        C7853d b10 = this.f51184a.b();
        C7853d.c b11 = b10 != null ? b10.b(bVar) : null;
        if (b11 == null || !c(hVar, bVar, b11, hVar2, fVar)) {
            return null;
        }
        return b11;
    }

    public final boolean c(C8441h hVar, C7853d.b bVar, C7853d.c cVar, h hVar2, f fVar) {
        if (!this.f51185b.b(hVar, cVar)) {
            return false;
        }
        return d(hVar, bVar, cVar, hVar2, fVar);
    }

    public final C7853d.b f(C8441h hVar, Object obj, C8450q qVar, j jVar) {
        if (hVar.q() != null) {
            return new C7853d.b(hVar.q(), hVar.r());
        }
        jVar.j(hVar, obj);
        String p10 = E.p(this.f51184a.getComponents(), obj, qVar, (s) null, "MemoryCacheService");
        jVar.i(hVar, p10);
        if (p10 == null) {
            return null;
        }
        if (C8442i.f(hVar).isEmpty()) {
            return new C7853d.b(p10, hVar.r());
        }
        Map<String, String> z10 = X.z(hVar.r());
        z10.put("coil#size", qVar.k().toString());
        return new C7853d.b(p10, z10);
    }

    public final C8454u g(C7098d.a aVar, C8441h hVar, C7853d.b bVar, C7853d.c cVar) {
        return new C8454u(cVar.b(), hVar, C6721f.MEMORY_CACHE, bVar, b(cVar), e(cVar), E.o(aVar));
    }

    public final boolean h(C7853d.b bVar, C8441h hVar, C7095a.b bVar2) {
        C7853d b10;
        if (bVar == null || !hVar.s().j() || !bVar2.e().b() || (b10 = this.f51184a.b()) == null) {
            return false;
        }
        LinkedHashMap linkedHashMap = new LinkedHashMap();
        linkedHashMap.put("coil#is_sampled", Boolean.valueOf(bVar2.f()));
        String d10 = bVar2.d();
        if (d10 != null) {
            linkedHashMap.put("coil#disk_cache_key", d10);
        }
        b10.d(bVar, new C7853d.c(bVar2.e(), linkedHashMap));
        return true;
    }
}
